{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport icon from '../img/bi_x-octagon.svg';\n\nconst btn = document.querySelector('[data-start]');\nconst input = document.querySelector('#datetime-picker');\nconst days = document.querySelector('[data-days]');\nconst hours = document.querySelector('[data-hours]');\nconst minutes = document.querySelector('[data-minutes]');\nconst seconds = document.querySelector('[data-seconds]');\n\nlet userSelectedDate = '';\n\nbtn.disabled = true;\ninput.disabled = false;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n\n    if (userSelectedDate.getTime() <= options.defaultDate.getTime()) {\n      iziToast.show({\n        message: 'Please choose a date in the future',\n        messageColor: '#fff',\n        messageSize: '16px',\n        messageLineHeight: '1.5',\n        backgroundColor: '#ef4040',\n        theme: 'dark',\n        iconUrl: icon,\n        position: 'topRight',\n      });\n      btn.disabled = true;\n    } else {\n      btn.disabled = false;\n      console.log(userSelectedDate);\n    }\n  },\n};\n\nconst setTimer = () => {\n  let timeDifference = userSelectedDate.getTime() - new Date().getTime();\n\n  let timeObject = convertMs(timeDifference);\n  setTimeValues(timeObject);\n\n  const intervalId = setInterval(() => {\n    timeDifference -= 1000;\n    if (timeDifference <= 0) {\n      clearInterval(intervalId);\n      input.disabled = false;\n      return;\n    }\n    timeObject = convertMs(timeDifference);\n    setTimeValues(timeObject);\n  }, 1000);\n};\n\nconst setTimeValues = object => {\n  days.textContent = object.days;\n  hours.textContent = object.hours;\n  minutes.textContent = object.minutes;\n  seconds.textContent = object.seconds;\n};\n\nconst addLeadingZero = value => String(value).padStart(2, '0');\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = addLeadingZero(Math.floor(ms / day));\n  const hours = addLeadingZero(Math.floor((ms % day) / hour));\n  const minutes = addLeadingZero(Math.floor(((ms % day) % hour) / minute));\n  const seconds = addLeadingZero(\n    Math.floor((((ms % day) % hour) % minute) / second)\n  );\n\n  return { days, hours, minutes, seconds };\n}\n\nconst fp = flatpickr('#datetime-picker', options);\n\nbtn.addEventListener('click', () => {\n  btn.disabled = true;\n  input.disabled = true;\n  setTimer();\n});\n"],"names":["btn","input","days","hours","minutes","seconds","userSelectedDate","options","selectedDates","iziToast","icon","setTimer","timeDifference","timeObject","convertMs","setTimeValues","intervalId","object","addLeadingZero","value","ms","flatpickr"],"mappings":"iJAQA,MAAMA,EAAM,SAAS,cAAc,cAAc,EAC3CC,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAQ,SAAS,cAAc,cAAc,EAC7CC,EAAU,SAAS,cAAc,gBAAgB,EACjDC,EAAU,SAAS,cAAc,gBAAgB,EAEvD,IAAIC,EAAmB,GAEvBN,EAAI,SAAW,GACfC,EAAM,SAAW,GAEjB,MAAMM,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBF,EAAmBE,EAAc,CAAC,EAE9BF,EAAiB,QAAS,GAAIC,EAAQ,YAAY,QAAO,GAC3DE,EAAS,KAAK,CACZ,QAAS,qCACT,aAAc,OACd,YAAa,OACb,kBAAmB,MACnB,gBAAiB,UACjB,MAAO,OACP,QAASC,EACT,SAAU,UAClB,CAAO,EACDV,EAAI,SAAW,KAEfA,EAAI,SAAW,GACf,QAAQ,IAAIM,CAAgB,EAE/B,CACH,EAEMK,EAAW,IAAM,CACrB,IAAIC,EAAiBN,EAAiB,QAAO,EAAK,IAAI,KAAI,EAAG,UAEzDO,EAAaC,EAAUF,CAAc,EACzCG,EAAcF,CAAU,EAExB,MAAMG,EAAa,YAAY,IAAM,CAEnC,GADAJ,GAAkB,IACdA,GAAkB,EAAG,CACvB,cAAcI,CAAU,EACxBf,EAAM,SAAW,GACjB,MACD,CACDY,EAAaC,EAAUF,CAAc,EACrCG,EAAcF,CAAU,CACzB,EAAE,GAAI,CACT,EAEME,EAAgBE,GAAU,CAC9Bf,EAAK,YAAce,EAAO,KAC1Bd,EAAM,YAAcc,EAAO,MAC3Bb,EAAQ,YAAca,EAAO,QAC7BZ,EAAQ,YAAcY,EAAO,OAC/B,EAEMC,EAAiBC,GAAS,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,EAE7D,SAASL,EAAUM,EAAI,CAMrB,MAAMlB,EAAOgB,EAAe,KAAK,MAAME,EAAK,KAAG,CAAC,EAC1CjB,EAAQe,EAAe,KAAK,MAAOE,EAAK,MAAO,IAAI,CAAC,EACpDhB,EAAUc,EAAe,KAAK,MAAQE,EAAK,MAAO,KAAQ,GAAM,CAAC,EACjEf,EAAUa,EACd,KAAK,MAASE,EAAK,MAAO,KAAQ,IAAU,GAAM,CACtD,EAEE,MAAO,CAAE,KAAAlB,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEWgB,EAAU,mBAAoBd,CAAO,EAEhDP,EAAI,iBAAiB,QAAS,IAAM,CAClCA,EAAI,SAAW,GACfC,EAAM,SAAW,GACjBU,GACF,CAAC"}